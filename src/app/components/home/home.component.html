<div class="home-dashboard">
  <div class="home-main-content">
    <div class="home-header">
      <div class="home-greeting">
        <fa-icon [icon]="faUserCircle" class="my-icon-lg"/>
        <div>
          <div class="home-welcome">Welcome back, {{ user.nickname }}!</div>
          <div class="home-quote">
            <fa-icon [icon]="faQuoteLeft" class="my-icon-sm"/>
            <span>{{ quote }}</span>
          </div>
        </div>
      </div>
    </div>
    <div class="home-quick-entry">
      <button class="home-quick-btn neon-cyan" [routerLink]="['/journals/diary/new']" type="button">
        <fa-icon [icon]="faBook" class="my-icon-md"/>
        New Diary
      </button>
      <button class="home-quick-btn neon-purple" [routerLink]="['/journals/dream/new']" type="button">
        <fa-icon [icon]="faMoon" class="my-icon-md"/>
        New Dream
      </button>
      <button class="home-quick-btn neon-green" [routerLink]="['/journals/ritual/new']" type="button">
        <fa-icon [icon]="faStar" class="my-icon-md"/>
        New Ritual
      </button>
      <button class="home-quick-btn neon-pink">
        <fa-icon [icon]="faCrown" class="my-icon-md"/>
        New Divination
      </button>
    </div>
    <div class="home-recent-entries">
      <div class="home-section-title">Recent Entries</div>
      @for (entry of recentEntries; track entry) {
        <div class="home-entry-card scale-up" [ngClass]="{'neon-glow-hover': entry.journal_type === 'diary', 'neon-glow-purple-hover': entry.journal_type === 'dream', 'neon-glow-green-hover': entry.journal_type === 'ritual', 'neon-glow-pink-hover': entry.journal_type === 'divination'}"
             [routerLink]="['/journals', entry.journal_type, entry.id]"
             type="button">
          <fa-icon
            [icon]="entry.journal_type === 'diary' ? faBook : entry.journal_type === 'dream' ? faMoon : entry.journal_type === 'ritual' ? faStar : faCrown"
            class="my-icon-sm"/>
          <div class="home-entry-info">
            <div class="home-entry-title">{{ entry.title }}</div>
            <div class="home-entry-date">{{ entry.created_at | date: 'dd MMM yyyy, HH:mm'}}</div>
            <div class="home-entry-snippet">{{ entry.entry }}</div>
          </div>
        </div>
      }
      <a routerLink="/journals" class="home-view-all-link">
        View All Entries
        <fa-icon [icon]="faArrowRight" class="my-icon-sm"/>
      </a>
    </div>

  </div>
  <div class="home-sidebar">
    <div class="home-calendar">
      <div class="home-section-title">Calendar</div>
      <div class="home-calendar-header">
        <span class="calendar-month-label">{{ monthName }} {{ currentYear }}</span>
      </div>
      <div class="home-calendar-grid">
        @for (day of calendarDays; track day.date.toISOString()) {
          <div class="home-calendar-cell" [ngClass]="{'has-entry': day.entries.length > 0, 'not-current': !day.isCurrentMonth}">
            <span>{{ day.date | date:'dd' }}</span>
            @if (day.entries.length > 0) {
              <fa-icon [icon]="faCheckCircle" class="my-icon-sm"/>
            }
          </div>
        }
      </div>
    </div>

    <div class="home-stats">
      <div class="home-section-title">Stats & Insights</div>
      <div class="home-stats-row">
        <div class="home-stat">
          <fa-icon [icon]="faBook" class="my-icon-sm"/>
          {{ stats.stats.diary || 0 }} Diaries
        </div>
        <div class="home-stat">
          <fa-icon [icon]="faMoon" class="my-icon-sm"/>
          {{ stats.stats.dream || 0 }} Dreams
        </div>
        <div class="home-stat">
          <fa-icon [icon]="faStar" class="my-icon-sm"/>
          {{ stats.stats.ritual || 0 }} Rituals
        </div>
        <div class="home-stat">
          <fa-icon [icon]="faCrown" class="my-icon-sm"/>
          {{ stats.stats.divination || 0 }} Divinations
        </div>
        <div class="home-stat">
          <fa-icon [icon]="faList" class="my-icon-sm"/>
          {{ stats.total }} Total
        </div>
      </div>
    </div>

  </div>

</div>
