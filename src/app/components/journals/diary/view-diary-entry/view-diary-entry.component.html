<div class="view-entry-root">
  <div class="view-entry-container">
    <button [routerLink]="['/journals']" class="view-entry-back" type="button">
      <fa-icon [icon]="faArrowLeft" class="my-icon"/>
      Back to Journals
    </button>
    @if (entry$ | async; as entry) {
      <div class="view-entry-header">
        <fa-icon [icon]="faBook" class="my-icon"/>
        <h1 class="view-entry-title">{{ entry.title }}</h1>
      </div>

      <!-- Basic Metadata -->
      <div class="view-entry-meta">
        <span class="view-entry-meta-item">
          <fa-icon [icon]="faCalendar" class="my-icon"/>
          {{ entry.created_at | date:'medium' }}
        </span>
        <span class="view-entry-meta-item">
          <fa-icon [icon]="faTag" class="my-icon"/>
          {{ entry.journal_type }}
        </span>

        <!-- Diary Date (if available) -->
        @if (entry.diary_date) {
          <span class="view-entry-meta-item">
            <fa-icon [icon]="faCalendar" class="my-icon"/>
            Entry Date: {{ entry.diary_date | date:'mediumDate' }}
          </span>
        }
      </div>

      <!-- Additional Metadata (Mood and Location) -->
      <div class="view-entry-additional-meta">
        <!-- Mood (if available) -->
        @if (entry.mood) {
          <div class="view-entry-mood">
            <span class="mood-label">Mood:</span>
            <span class="mood-icon">
              <fa-icon [icon]="getMoodIcon(entry.mood)" class="my-icon"/>
            </span>
            <span class="mood-text">{{ entry.mood }}</span>
          </div>
        }

        <!-- Location (if available) -->
        @if (entry.location) {
          <div class="view-entry-location">
            <fa-icon [icon]="faMapMarkerAlt" class="my-icon"/>
            <span>{{ entry.location }}</span>
          </div>
        }
      </div>

      <!-- Main Content -->
      <div class="view-entry-content" [innerHTML]="entry.entry | markdown"></div>

      <!-- Gratitude List (if available) -->
      @if (entry.gratitude_list && entry.gratitude_list.length > 0) {
        <div class="view-entry-section">
          <div class="view-entry-section-header">
            <fa-icon [icon]="faListUl" class="my-icon"/>
            <h2>Gratitude List</h2>
          </div>
          <ul class="view-entry-list">
            @for (item of entry.gratitude_list; track item) {
              <li class="view-entry-list-item">{{ item }}</li>
            }
          </ul>
        </div>
      }

      <!-- Achievements (if available) -->
      @if (entry.achievements && entry.achievements.length > 0) {
        <div class="view-entry-section">
          <div class="view-entry-section-header">
            <fa-icon [icon]="faTrophy" class="my-icon"/>
            <h2>Achievements</h2>
          </div>
          <ul class="view-entry-list">
            @for (item of entry.achievements; track item) {
              <li class="view-entry-list-item">{{ item }}</li>
            }
          </ul>
        </div>
      }

      <!-- Tags (if available) -->
      @if (entry.tags && entry.tags.length) {
        <div class="view-entry-tags">
          @for (tag of entry.tags; track tag) {
            <span class="view-entry-tag">{{ tag.name }}</span>
          }
        </div>
      }
    }
  </div>
</div>
